{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RinaQerkezi\\\\Desktop\\\\Detyra\\\\frontend\\\\src\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [username, setUsername] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const uname = localStorage.getItem('username');\n    if (!token) {\n      navigate('/');\n      return;\n    }\n    setUsername(uname);\n  }, []);\n  const doLogout = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      localStorage.clear();\n      navigate('/');\n      return;\n    }\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    try {\n      await axios.post('http://localhost:8000/api/logout/', {}, hdr);\n    } catch (e) {/* ignore errors */}\n    localStorage.clear();\n    navigate('/');\n  };\n  if (!username) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 24\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: '20px auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Logged in as \", username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: doLogout,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"f2oRw2rAJQHOrO5gX22oXuihM6I=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","Dashboard","_s","username","setUsername","navigate","token","localStorage","getItem","uname","doLogout","clear","hdr","headers","Authorization","post","e","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","onClick","_c","$RefreshReg$"],"sources":["C:/Users/RinaQerkezi/Desktop/Detyra/frontend/src/Dashboard.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nfunction Dashboard(){\r\n  const [username, setUsername] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(()=>{\r\n    const token = localStorage.getItem('token');\r\n    const uname = localStorage.getItem('username');\r\n    if(!token) { navigate('/'); return; }\r\n    setUsername(uname);\r\n  },[])\r\n\r\n  const doLogout = async ()=>{\r\n    const token = localStorage.getItem('token');\r\n    if(!token){ localStorage.clear(); navigate('/'); return; }\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    try{\r\n      await axios.post('http://localhost:8000/api/logout/', {}, hdr);\r\n    }catch(e){ /* ignore errors */ }\r\n    localStorage.clear();\r\n    navigate('/');\r\n  }\r\n\r\n  if(!username) return <div>Loading...</div>\r\n  return (\r\n    <div style={{maxWidth:800, margin:'20px auto'}}>\r\n      <h2>Logged in as {username}</h2>\r\n      <button onClick={doLogout}>Logout</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard;"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,WAAW,QAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,SAASC,SAASA,CAAA,EAAE;EAAAC,EAAA;EAClB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAMS,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAE9BH,SAAS,CAAC,MAAI;IACZ,MAAMW,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,KAAK,GAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC9C,IAAG,CAACF,KAAK,EAAE;MAAED,QAAQ,CAAC,GAAG,CAAC;MAAE;IAAQ;IACpCD,WAAW,CAACK,KAAK,CAAC;EACpB,CAAC,EAAC,EAAE,CAAC;EAEL,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAU;IACzB,MAAMJ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAG,CAACF,KAAK,EAAC;MAAEC,YAAY,CAACI,KAAK,CAAC,CAAC;MAAEN,QAAQ,CAAC,GAAG,CAAC;MAAE;IAAQ;IACzD,MAAMO,GAAG,GAAG;MAAEC,OAAO,EAAE;QAAEC,aAAa,EAAE,QAAQ,GAAGR;MAAM;IAAE,CAAC;IAC5D,IAAG;MACD,MAAMT,KAAK,CAACkB,IAAI,CAAC,mCAAmC,EAAE,CAAC,CAAC,EAAEH,GAAG,CAAC;IAChE,CAAC,QAAMI,CAAC,EAAC,CAAE;IACXT,YAAY,CAACI,KAAK,CAAC,CAAC;IACpBN,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC;EAED,IAAG,CAACF,QAAQ,EAAE,oBAAOH,OAAA;IAAAiB,QAAA,EAAK;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAC1C,oBACErB,OAAA;IAAKsB,KAAK,EAAE;MAACC,QAAQ,EAAC,GAAG;MAAEC,MAAM,EAAC;IAAW,CAAE;IAAAP,QAAA,gBAC7CjB,OAAA;MAAAiB,QAAA,GAAI,eAAa,EAACd,QAAQ;IAAA;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAChCrB,OAAA;MAAQyB,OAAO,EAAEf,QAAS;MAAAO,QAAA,EAAC;IAAM;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACvC,CAAC;AAEV;AAACnB,EAAA,CA7BQD,SAAS;EAAA,QAECH,WAAW;AAAA;AAAA4B,EAAA,GAFrBzB,SAAS;AA+BlB,eAAeA,SAAS;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}