{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RinaQerkezi\\\\Desktop\\\\Detyra\\\\frontend\\\\src\\\\StudentDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StudentDashboard({\n  data\n}) {\n  _s();\n  const [studentSubjects, setStudentSubjects] = useState((data === null || data === void 0 ? void 0 : data.subjects) || []);\n  const [allSubjects, setAllSubjects] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        const r = await axios.get('http://localhost:8000/api/subjects/');\n        setAllSubjects(r.data);\n        // refresh student subjects from protected endpoint\n        const token = localStorage.getItem('token');\n        const hdr = {\n          headers: {\n            Authorization: 'Token ' + token\n          }\n        };\n        const s = await axios.get('http://localhost:8000/api/student/', hdr).catch(() => null);\n        if (s && s.data) setStudentSubjects(s.data.subjects || []);\n      } catch (e) {\n        console.error(e);\n      }\n      setLoading(false);\n    };\n    fetch();\n  }, []);\n  const isEnrolled = subject => {\n    return studentSubjects.some(s => s.id === subject.id);\n  };\n  const enroll = async subjectId => {\n    const token = localStorage.getItem('token');\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    try {\n      const resp = await axios.post(`http://localhost:8000/api/subjects/${subjectId}/enroll/`, {}, hdr);\n      // update local state: add to studentSubjects\n      setAllSubjects(prev => prev.map(s => s.id === resp.data.id ? resp.data : s));\n      setStudentSubjects(prev => [...prev, resp.data]);\n      alert('Enrolled successfully');\n    } catch (e) {\n      alert('Enroll failed');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Student Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Welcome \\u2014 here are your enrolled subjects and available courses to enroll.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Subjects\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), studentSubjects.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No subjects enrolled.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: studentSubjects.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: s.name\n        }, s.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 40\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Available Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: allSubjects.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: s.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this), \" \\u2014 \", s.professor, ' ', isEnrolled(s) ? /*#__PURE__*/_jsxDEV(\"em\", {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Enrolled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 34\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            onClick: () => {\n              if (window.confirm('Enroll in this course?')) enroll(s.id);\n            },\n            style: {\n              marginLeft: 8\n            },\n            children: \"Enroll\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 19\n          }, this)]\n        }, s.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentDashboard, \"D/uLHn+rdBB7qQeu0xPvoFdRTHw=\");\n_c = StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","StudentDashboard","data","_s","studentSubjects","setStudentSubjects","subjects","allSubjects","setAllSubjects","loading","setLoading","fetch","r","get","token","localStorage","getItem","hdr","headers","Authorization","s","catch","e","console","error","isEnrolled","subject","some","id","enroll","subjectId","resp","post","prev","map","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","length","name","marginBottom","professor","marginLeft","className","onClick","window","confirm","_c","$RefreshReg$"],"sources":["C:/Users/RinaQerkezi/Desktop/Detyra/frontend/src/StudentDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function StudentDashboard({data}){\r\n  const [studentSubjects, setStudentSubjects] = useState(data?.subjects || []);\r\n  const [allSubjects, setAllSubjects] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(()=>{\r\n    const fetch = async ()=>{\r\n      try{\r\n        const r = await axios.get('http://localhost:8000/api/subjects/');\r\n        setAllSubjects(r.data);\r\n        // refresh student subjects from protected endpoint\r\n        const token = localStorage.getItem('token');\r\n        const hdr = { headers: { Authorization: 'Token ' + token } };\r\n        const s = await axios.get('http://localhost:8000/api/student/', hdr).catch(()=>null);\r\n        if(s && s.data) setStudentSubjects(s.data.subjects || []);\r\n      }catch(e){ console.error(e) }\r\n      setLoading(false);\r\n    }\r\n    fetch();\r\n  },[])\r\n\r\n  const isEnrolled = (subject)=> {\r\n    return studentSubjects.some(s => s.id === subject.id);\r\n  }\r\n\r\n  const enroll = async (subjectId)=>{\r\n    const token = localStorage.getItem('token');\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    try{\r\n      const resp = await axios.post(`http://localhost:8000/api/subjects/${subjectId}/enroll/`, {}, hdr);\r\n      // update local state: add to studentSubjects\r\n      setAllSubjects(prev => prev.map(s => s.id===resp.data.id ? resp.data : s));\r\n      setStudentSubjects(prev => [...prev, resp.data]);\r\n      alert('Enrolled successfully');\r\n    }catch(e){ alert('Enroll failed'); }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Student Dashboard</h2>\r\n      <p>Welcome — here are your enrolled subjects and available courses to enroll.</p>\r\n\r\n      <div style={{marginTop:10}}>\r\n        <h3>Your Subjects</h3>\r\n        {studentSubjects.length===0 ? <p>No subjects enrolled.</p> : (\r\n          <ul>{studentSubjects.map(s=> <li key={s.id}>{s.name}</li>)}</ul>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{marginTop:10}}>\r\n        <h3>Available Courses</h3>\r\n        {loading ? <p>Loading...</p> : (\r\n          <ul>\r\n            {allSubjects.map(s => (\r\n              <li key={s.id} style={{marginBottom:8}}>\r\n                <strong>{s.name}</strong> — {s.professor}\r\n                {' '}\r\n                {isEnrolled(s) ? <em style={{marginLeft:8}}>Enrolled</em> : (\r\n                  <button className=\"button\" onClick={()=>{ if(window.confirm('Enroll in this course?')) enroll(s.id) }} style={{marginLeft:8}}>Enroll</button>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}