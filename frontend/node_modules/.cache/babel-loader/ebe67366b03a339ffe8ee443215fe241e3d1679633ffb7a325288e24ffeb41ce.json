{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RinaQerkezi\\\\Desktop\\\\Detyra\\\\frontend\\\\src\\\\StudentDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StudentDashboard({\n  data\n}) {\n  _s();\n  const studentSubjects = (data === null || data === void 0 ? void 0 : data.subjects) || [];\n  const [allSubjects, setAllSubjects] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        const r = await axios.get('http://localhost:8000/api/subjects/');\n        setAllSubjects(r.data);\n      } catch (e) {\n        console.error(e);\n      }\n      setLoading(false);\n    };\n    fetch();\n  }, []);\n  const isEnrolled = subject => {\n    return studentSubjects.some(s => s.id === subject.id);\n  };\n  const enroll = async subjectId => {\n    const token = localStorage.getItem('token');\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    try {\n      const resp = await axios.post(`http://localhost:8000/api/subjects/${subjectId}/enroll/`, {}, hdr);\n      // update local state: add to studentSubjects\n      setAllSubjects(prev => prev.map(s => s.id === resp.data.id ? resp.data : s));\n      // update studentSubjects by refetching student dashboard data or append\n      setTimeout(() => {\n        window.location.reload();\n      }, 300);\n    } catch (e) {\n      alert('Enroll failed');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Student Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Welcome \\u2014 here are your enrolled subjects and available courses to enroll.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Subjects\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), studentSubjects.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No subjects enrolled.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: studentSubjects.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: s.name\n        }, s.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 40\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Available Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: allSubjects.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: s.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this), \" \\u2014 \", s.professor, ' ', isEnrolled(s) ? /*#__PURE__*/_jsxDEV(\"em\", {\n            style: {\n              marginLeft: 8\n            },\n            children: \"Enrolled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 34\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => enroll(s.id),\n            style: {\n              marginLeft: 8\n            },\n            children: \"Enroll\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 19\n          }, this)]\n        }, s.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentDashboard, \"AIUXISrtQD1DruLX4ZN0wcgG9n4=\");\n_c = StudentDashboard;\nvar _c;\n$RefreshReg$(_c, \"StudentDashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","StudentDashboard","data","_s","studentSubjects","subjects","allSubjects","setAllSubjects","loading","setLoading","fetch","r","get","e","console","error","isEnrolled","subject","some","s","id","enroll","subjectId","token","localStorage","getItem","hdr","headers","Authorization","resp","post","prev","map","setTimeout","window","location","reload","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","length","name","marginBottom","professor","marginLeft","onClick","_c","$RefreshReg$"],"sources":["C:/Users/RinaQerkezi/Desktop/Detyra/frontend/src/StudentDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function StudentDashboard({data}){\r\n  const studentSubjects = data?.subjects || [];\r\n  const [allSubjects, setAllSubjects] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(()=>{\r\n    const fetch = async ()=>{\r\n      try{\r\n        const r = await axios.get('http://localhost:8000/api/subjects/');\r\n        setAllSubjects(r.data);\r\n      }catch(e){ console.error(e) }\r\n      setLoading(false);\r\n    }\r\n    fetch();\r\n  },[])\r\n\r\n  const isEnrolled = (subject)=> {\r\n    return studentSubjects.some(s => s.id === subject.id);\r\n  }\r\n\r\n  const enroll = async (subjectId)=>{\r\n    const token = localStorage.getItem('token');\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    try{\r\n      const resp = await axios.post(`http://localhost:8000/api/subjects/${subjectId}/enroll/`, {}, hdr);\r\n      // update local state: add to studentSubjects\r\n      setAllSubjects(prev => prev.map(s => s.id===resp.data.id ? resp.data : s));\r\n      // update studentSubjects by refetching student dashboard data or append\r\n      setTimeout(()=>{\r\n        window.location.reload();\r\n      }, 300);\r\n    }catch(e){ alert('Enroll failed'); }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Student Dashboard</h2>\r\n      <p>Welcome — here are your enrolled subjects and available courses to enroll.</p>\r\n\r\n      <div style={{marginTop:10}}>\r\n        <h3>Your Subjects</h3>\r\n        {studentSubjects.length===0 ? <p>No subjects enrolled.</p> : (\r\n          <ul>{studentSubjects.map(s=> <li key={s.id}>{s.name}</li>)}</ul>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{marginTop:10}}>\r\n        <h3>Available Courses</h3>\r\n        {loading ? <p>Loading...</p> : (\r\n          <ul>\r\n            {allSubjects.map(s => (\r\n              <li key={s.id} style={{marginBottom:8}}>\r\n                <strong>{s.name}</strong> — {s.professor}\r\n                {' '}\r\n                {isEnrolled(s) ? <em style={{marginLeft:8}}>Enrolled</em> : (\r\n                  <button onClick={()=>enroll(s.id)} style={{marginLeft:8}}>Enroll</button>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,gBAAgBA,CAAC;EAACC;AAAI,CAAC,EAAC;EAAAC,EAAA;EAC9C,MAAMC,eAAe,GAAG,CAAAF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,QAAQ,KAAI,EAAE;EAC5C,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAI;IACZ,MAAMc,KAAK,GAAG,MAAAA,CAAA,KAAU;MACtB,IAAG;QACD,MAAMC,CAAC,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,qCAAqC,CAAC;QAChEL,cAAc,CAACI,CAAC,CAACT,IAAI,CAAC;MACxB,CAAC,QAAMW,CAAC,EAAC;QAAEC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;MAAC;MAC5BJ,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IACDC,KAAK,CAAC,CAAC;EACT,CAAC,EAAC,EAAE,CAAC;EAEL,MAAMM,UAAU,GAAIC,OAAO,IAAI;IAC7B,OAAOb,eAAe,CAACc,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKH,OAAO,CAACG,EAAE,CAAC;EACvD,CAAC;EAED,MAAMC,MAAM,GAAG,MAAOC,SAAS,IAAG;IAChC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,GAAG,GAAG;MAAEC,OAAO,EAAE;QAAEC,aAAa,EAAE,QAAQ,GAAGL;MAAM;IAAE,CAAC;IAC5D,IAAG;MACD,MAAMM,IAAI,GAAG,MAAM/B,KAAK,CAACgC,IAAI,CAAC,sCAAsCR,SAAS,UAAU,EAAE,CAAC,CAAC,EAAEI,GAAG,CAAC;MACjG;MACAnB,cAAc,CAACwB,IAAI,IAAIA,IAAI,CAACC,GAAG,CAACb,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAGS,IAAI,CAAC3B,IAAI,CAACkB,EAAE,GAAGS,IAAI,CAAC3B,IAAI,GAAGiB,CAAC,CAAC,CAAC;MAC1E;MACAc,UAAU,CAAC,MAAI;QACbC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;MAC1B,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,QAAMvB,CAAC,EAAC;MAAEwB,KAAK,CAAC,eAAe,CAAC;IAAE;EACrC,CAAC;EAED,oBACErC,OAAA;IAAAsC,QAAA,gBACEtC,OAAA;MAAAsC,QAAA,EAAI;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC1B1C,OAAA;MAAAsC,QAAA,EAAG;IAA0E;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAEjF1C,OAAA;MAAK2C,KAAK,EAAE;QAACC,SAAS,EAAC;MAAE,CAAE;MAAAN,QAAA,gBACzBtC,OAAA;QAAAsC,QAAA,EAAI;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACrBtC,eAAe,CAACyC,MAAM,KAAG,CAAC,gBAAG7C,OAAA;QAAAsC,QAAA,EAAG;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBACxD1C,OAAA;QAAAsC,QAAA,EAAKlC,eAAe,CAAC4B,GAAG,CAACb,CAAC,iBAAGnB,OAAA;UAAAsC,QAAA,EAAgBnB,CAAC,CAAC2B;QAAI,GAAb3B,CAAC,CAACC,EAAE;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAc,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAChE;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAEN1C,OAAA;MAAK2C,KAAK,EAAE;QAACC,SAAS,EAAC;MAAE,CAAE;MAAAN,QAAA,gBACzBtC,OAAA;QAAAsC,QAAA,EAAI;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACzBlC,OAAO,gBAAGR,OAAA;QAAAsC,QAAA,EAAG;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBAC1B1C,OAAA;QAAAsC,QAAA,EACGhC,WAAW,CAAC0B,GAAG,CAACb,CAAC,iBAChBnB,OAAA;UAAe2C,KAAK,EAAE;YAACI,YAAY,EAAC;UAAC,CAAE;UAAAT,QAAA,gBACrCtC,OAAA;YAAAsC,QAAA,EAASnB,CAAC,CAAC2B;UAAI;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,YAAG,EAACvB,CAAC,CAAC6B,SAAS,EACvC,GAAG,EACHhC,UAAU,CAACG,CAAC,CAAC,gBAAGnB,OAAA;YAAI2C,KAAK,EAAE;cAACM,UAAU,EAAC;YAAC,CAAE;YAAAX,QAAA,EAAC;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,gBACvD1C,OAAA;YAAQkD,OAAO,EAAEA,CAAA,KAAI7B,MAAM,CAACF,CAAC,CAACC,EAAE,CAAE;YAACuB,KAAK,EAAE;cAACM,UAAU,EAAC;YAAC,CAAE;YAAAX,QAAA,EAAC;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CACzE;QAAA,GALMvB,CAAC,CAACC,EAAE;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAMT,CACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACL;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEH,CAAC;AAEV;AAACvC,EAAA,CAjEuBF,gBAAgB;AAAAkD,EAAA,GAAhBlD,gBAAgB;AAAA,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}