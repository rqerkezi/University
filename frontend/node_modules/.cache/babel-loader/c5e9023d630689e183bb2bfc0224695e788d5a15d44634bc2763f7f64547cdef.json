{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RinaQerkezi\\\\Desktop\\\\Detyra\\\\frontend\\\\src\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport AdminDashboard from './AdminDashboard';\nimport StudentDashboard from './StudentDashboard';\nimport ProfessorDashboard from './ProfessorDashboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [username, setUsername] = useState(null);\n  const [data, setData] = useState(null);\n  const [role, setRole] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const uname = localStorage.getItem('username');\n    const r = localStorage.getItem('role');\n    if (!token) {\n      navigate('/');\n      return;\n    }\n    setUsername(uname);\n    setRole(r);\n    // fetch role-specific dashboard\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    let url = 'http://localhost:8000/api/';\n    if (r === 'student') url += 'student/';else if (r === 'professor') url += 'professor/';else if (r === 'administrator') url += 'admin/';else {\n      setData({\n        role: 'Unknown',\n        info: {}\n      });\n      return;\n    }\n    axios.get(url, hdr).then(resp => setData(resp.data)).catch(() => {\n      localStorage.clear();\n      navigate('/');\n    });\n  }, []);\n  const doLogout = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      localStorage.clear();\n      navigate('/');\n      return;\n    }\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    try {\n      await axios.post('http://localhost:8000/api/logout/', {}, hdr);\n    } catch (e) {/* ignore errors */}\n    localStorage.clear();\n    navigate('/');\n  };\n  if (!username) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 24\n  }, this);\n  // show different components depending on role\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [role === 'administrator' && /*#__PURE__*/_jsxDEV(AdminDashboard, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 36\n      }, this), role === 'student' && /*#__PURE__*/_jsxDEV(StudentDashboard, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 30\n      }, this), role === 'professor' && /*#__PURE__*/_jsxDEV(ProfessorDashboard, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 32\n      }, this), !['administrator', 'student', 'professor'].includes(role) && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Unknown role\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: JSON.stringify(data || {}, null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: doLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"gV4mTZjuf5iAmboGRBK6cqcrcfQ=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","AdminDashboard","StudentDashboard","ProfessorDashboard","jsxDEV","_jsxDEV","Dashboard","_s","username","setUsername","data","setData","role","setRole","navigate","token","localStorage","getItem","uname","r","hdr","headers","Authorization","url","info","get","then","resp","catch","clear","doLogout","post","e","children","fileName","_jsxFileName","lineNumber","columnNumber","className","includes","JSON","stringify","style","marginTop","onClick","_c","$RefreshReg$"],"sources":["C:/Users/RinaQerkezi/Desktop/Detyra/frontend/src/Dashboard.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport AdminDashboard from './AdminDashboard';\r\nimport StudentDashboard from './StudentDashboard';\r\nimport ProfessorDashboard from './ProfessorDashboard';\r\n\r\nfunction Dashboard(){\r\n  const [username, setUsername] = useState(null);\r\n  const [data, setData] = useState(null);\r\n  const [role, setRole] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(()=>{\r\n    const token = localStorage.getItem('token');\r\n    const uname = localStorage.getItem('username');\r\n    const r = localStorage.getItem('role');\r\n    if(!token) { navigate('/'); return; }\r\n    setUsername(uname);\r\n    setRole(r);\r\n    // fetch role-specific dashboard\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    let url = 'http://localhost:8000/api/';\r\n    if(r==='student') url += 'student/';\r\n    else if(r==='professor') url += 'professor/';\r\n    else if(r==='administrator') url += 'admin/';\r\n    else { setData({role: 'Unknown', info: {}}); return; }\r\n\r\n    axios.get(url, hdr).then(resp=>setData(resp.data)).catch(()=>{ localStorage.clear(); navigate('/'); });\r\n  },[])\r\n\r\n  const doLogout = async ()=>{\r\n    const token = localStorage.getItem('token');\r\n    if(!token){ localStorage.clear(); navigate('/'); return; }\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    try{\r\n      await axios.post('http://localhost:8000/api/logout/', {}, hdr);\r\n    }catch(e){ /* ignore errors */ }\r\n    localStorage.clear();\r\n    navigate('/');\r\n  }\r\n\r\n  if(!username) return <div>Loading...</div>\r\n  // show different components depending on role\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card\">\r\n        {role==='administrator' && <AdminDashboard data={data} />}\r\n        {role==='student' && <StudentDashboard data={data} />}\r\n        {role==='professor' && <ProfessorDashboard data={data} />}\r\n        {!['administrator','student','professor'].includes(role) && (\r\n          <div>\r\n            <h2>Unknown role</h2>\r\n            <pre>{JSON.stringify(data || {}, null, 2)}</pre>\r\n          </div>\r\n        )}\r\n        <div style={{marginTop:20}}>\r\n          <button className=\"button\" onClick={doLogout}>Logout</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}