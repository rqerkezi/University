{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RinaQerkezi\\\\Desktop\\\\Detyra\\\\frontend\\\\src\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [username, setUsername] = useState(null);\n  const [data, setData] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const uname = localStorage.getItem('username');\n    const role = localStorage.getItem('role');\n    if (!token) {\n      navigate('/');\n      return;\n    }\n    setUsername(uname);\n    // fetch role-specific dashboard\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    let url = 'http://localhost:8000/api/';\n    if (role === 'student') url += 'student/';else if (role === 'professor') url += 'professor/';else if (role === 'administrator') url += 'admin/';else {\n      setData({\n        role: 'Unknown',\n        info: {}\n      });\n      return;\n    }\n    axios.get(url, hdr).then(resp => setData(resp.data)).catch(() => {\n      localStorage.clear();\n      navigate('/');\n    });\n  }, []);\n  const doLogout = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      localStorage.clear();\n      navigate('/');\n      return;\n    }\n    const hdr = {\n      headers: {\n        Authorization: 'Token ' + token\n      }\n    };\n    try {\n      await axios.post('http://localhost:8000/api/logout/', {}, hdr);\n    } catch (e) {/* ignore errors */}\n    localStorage.clear();\n    navigate('/');\n  };\n  if (!username || !data) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 33\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: '20px auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: data.role || 'Logged in as ' + username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), data.subjects && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Subjects\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: data.subjects.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: s.name\n        }, s.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 36\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: doLogout,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"uvYN1uPHR9n3QjYFGmv6kviFS6A=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","Dashboard","_s","username","setUsername","data","setData","navigate","token","localStorage","getItem","uname","role","hdr","headers","Authorization","url","info","get","then","resp","catch","clear","doLogout","post","e","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","subjects","map","s","name","id","onClick","_c","$RefreshReg$"],"sources":["C:/Users/RinaQerkezi/Desktop/Detyra/frontend/src/Dashboard.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nfunction Dashboard(){\r\n  const [username, setUsername] = useState(null);\r\n  const [data, setData] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(()=>{\r\n    const token = localStorage.getItem('token');\r\n    const uname = localStorage.getItem('username');\r\n    const role = localStorage.getItem('role');\r\n    if(!token) { navigate('/'); return; }\r\n    setUsername(uname);\r\n    // fetch role-specific dashboard\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    let url = 'http://localhost:8000/api/';\r\n    if(role==='student') url += 'student/';\r\n    else if(role==='professor') url += 'professor/';\r\n    else if(role==='administrator') url += 'admin/';\r\n    else { setData({role: 'Unknown', info: {}}); return; }\r\n\r\n    axios.get(url, hdr).then(resp=>setData(resp.data)).catch(()=>{ localStorage.clear(); navigate('/'); });\r\n  },[])\r\n\r\n  const doLogout = async ()=>{\r\n    const token = localStorage.getItem('token');\r\n    if(!token){ localStorage.clear(); navigate('/'); return; }\r\n    const hdr = { headers: { Authorization: 'Token ' + token } };\r\n    try{\r\n      await axios.post('http://localhost:8000/api/logout/', {}, hdr);\r\n    }catch(e){ /* ignore errors */ }\r\n    localStorage.clear();\r\n    navigate('/');\r\n  }\r\n\r\n  if(!username || !data) return <div>Loading...</div>\r\n  return (\r\n    <div style={{maxWidth:800, margin:'20px auto'}}>\r\n      <h2>{data.role || ('Logged in as ' + username)}</h2>\r\n      {data.subjects && (\r\n        <div>\r\n          <h3>Subjects</h3>\r\n          <ul>\r\n            {data.subjects.map(s=> <li key={s.id}>{s.name}</li>)}\r\n          </ul>\r\n        </div>\r\n      )}\r\n      <button onClick={doLogout}>Logout</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}